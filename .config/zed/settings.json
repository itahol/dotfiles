// Zed settings
//
// For information on how to configure Zed, see the Zed
// documentation: https://zed.dev/docs/configuring-zed
//
// To see all of Zed's default settings without changing your
// custom settings, run `zed: open default settings` from the
// command palette (cmd-shift-p / ctrl-shift-p)
{
  "icon_theme": "Catppuccin Mocha",
  "telemetry": {
    "metrics": false,
    "diagnostics": false
  },
  "base_keymap": "VSCode",
  "vim_mode": true,
  "vim": {
    "toggle_relative_line_numbers": true,
    "use_smartcase_find": true
    // "use_multiline_find": true
  },
  // UI
  "tab_bar": {
    "show": true
  },
  "relative_line_numbers": true,
  "scrollbar": { "show": "never" },
  "project_panel": { "dock": "right" },
  "soft_wrap": "bounded",
  "agent_font_size": 19,
  // "ui_font_size": 20.0,
  // "buffer_font_size": 18.0,
  "buffer_font_size": 15.0,
  "ui_font_size": 18.0,
  "buffer_font_family": "JetBrainsMono Nerd Font Mono",
  "preferred_line_length": 120,
  "cursor_blink": false,
  "tabs": {
    "git_status": true,
    "file_icons": true
  },
  "preview_tabs": {
    "enable_preview_from_code_navigation": true
    // "enable_preview_from_file_finder": true
  },
  "centered_layout": {
    "left_padding": 0.22,
    "right_padding": 0.22
  },
  "theme": {
    "mode": "system",
    "light": "One Light",
    "dark": "Ayu Mirage"
  },
  // Editor
  "vertical_scroll_margin": 10,
  "use_smartcase_search": true,
  "show_signature_help_after_edits": false,
  "use_autoclose": false,
  "diagnostics": {
    "inline": {
      "enabled": true
    }
  },
  // Git
  "git": {
    "hunk_style": "unstaged_hollow"
  },
  "git_panel": {
    "sort_by_path": true
  },
  // Formatter
  "formatter": "prettier",
  // LSP
  "languages": {
    "TypeScript": {
      "inlay_hints": {
        "enabled": true
      },
      "code_actions_on_format": {
        "source.fixAll.eslint": true,
        "source.organizeImports": true
        // "source.removeUnusedImports": true,
        // "source.sortImports": true
      },
      "formatter": "prettier",
      // "formatter": [
      //   {
      //     "external": {
      //       "command": "prettierd",
      //       "arguments": ["--stdin-filepath", "{buffer_path}"]
      //     }
      //   }
      // ],
      // "language_servers": ["tsgo"]
      // "language_servers": ["tsgo", "vtsls"]
      "language_servers": ["vtsls", "eslint", "cyera-lsp", "@effect/language-service"]
    },
    "Git Commit": {
      "format_on_save": "off"
    },
    "Git Rebase": {
      "format_on_save": "off"
    }
  },
  "lsp": {
    "cyera-lsp": {
      // "binary": {
      //   "path": "node",
      //   "arguments": ["/Users/itamar/checkouts/cyera-ts-lsp/build/server.js", "--stdio"]
      // }
    },
    "vtsls": {
      "settings": {
        // For TypeScript:
        "typescript": {
          "tsserver": { "maxTsServerMemory": 10240 },
          "inlayHints": {
            "parameterNames": {
              "enabled": "all",
              "suppressWhenArgumentMatchesName": true
            }
          },
          "preferences": {
            "importModuleSpecifier": "relative"
          }
        },
        // For JavaScript:
        "javascript": { "tsserver": { "maxTsServerMemory": 8192 } }
      }
    },
    "typos": {
      "initialization_options": {
        // Diagnostic severity within Zed. "Error" by default, can be:
        // "Error", "Hint", "Information", "Warning"
        "diagnosticSeverity": "Hint"
      }
    },
    "harper-ls": {
      "settings": {
        "harper-ls": {
          "diagnosticSeverity": "hint" // hint, warning, error, information
        }
      }
    }
  },
  // Project panel
  "file_scan_exclusions": [
    "**/.git",
    "**/.svn",
    "**/.hg",
    "**/CVS",
    "**/.DS_Store",
    "**/Thumbs.db",
    "**/.classpath",
    "**/.settings",
    // Above is default
    "**/node_modules",
    "**/dist",
    "**/__pycache__"
  ],
  // "load_direnv": "shell_hook",
  // Terminal
  "terminal": {
    "env": {
      "LOG_LEVEL": "debug",
      "EDITOR": "zed-preview",
      "GIT_EDITOR": "zed-preview --wait"
      // "EDITOR": "zed",
      // "GIT_EDITOR": "zed --wait"
    }
  },
  "features": {
    "edit_prediction_provider": "copilot"
  },
  // Assistant
  "agent": {
    "always_allow_tool_actions": true,
    "inline_assistant_model": {
      "provider": "copilot_chat",
      "model": "gpt-4.1"
    },
    "single_file_review": true,
    "profiles": {
      "claude": {
        "name": "Claude",
        "enable_all_context_servers": false,
        "context_servers": {
          "claude-code": {
            "tools": {
              "Read": true,
              "Task": true,
              "TodoRead": true,
              "TodoWrite": true,
              "WebFetch": true,
              "Write": true,
              "NotebookRead": true,
              "NotebookEdit": true,
              "MultiEdit": true,
              "LS": true,
              "Grep": true,
              "Glob": true,
              "Edit": true,
              "Batch": true,
              "Bash": true
            }
          }
        }
      },
      "ask": {
        "name": "Ask",
        "tools": {
          "copy_path": false,
          "open": true,
          "terminal": false,
          "code_symbols": true,
          "symbol_info": true,
          "contents": true,
          "diagnostics": true,
          "fetch": true,
          "list_directory": true,
          "now": true,
          "find_path": true,
          "read_file": true,
          "grep": true,
          "thinking": true,
          "web_search": true
        },
        "enable_all_context_servers": true,
        "context_servers": {
          "claude-code": {
            "tools": {
              "exit_plan_mode": false,
              "Write": false,
              "WebFetch": false,
              "TodoWrite": false,
              "TodoRead": false,
              "Task": false,
              "Read": false,
              "NotebookRead": false,
              "NotebookEdit": false,
              "MultiEdit": false,
              "LS": false,
              "Grep": false,
              "Glob": false,
              "Edit": false,
              "Bash": false
            }
          },
          "git": {
            "tools": {
              "git_create_branch": false,
              "git_checkout": false,
              "git_commit": false,
              "git_reset": false,
              "git_add": false
            }
          },
          "postgres-context-server": {
            "tools": {
              "query": true,
              "pg-schema": true
            }
          }
        }
      },
      "write": {
        "name": "Write",
        "tools": {
          "create_directory": true,
          "open": false,
          "terminal": true,
          "batch_tool": true,
          "code_actions": true,
          "code_symbols": true,
          "contents": true,
          "copy_path": true,
          "create_file": true,
          "delete_path": true,
          "diagnostics": true,
          "edit_file": true,
          "fetch": true,
          "list_directory": true,
          "move_path": true,
          "now": true,
          "find_path": true,
          "read_file": true,
          "grep": true,
          "rename": true,
          "symbol_info": true,
          "thinking": true,
          "web_search": true
        },
        "enable_all_context_servers": true,
        "context_servers": {
          "claude-code": {
            "tools": {
              "exit_plan_mode": false,
              "Write": false,
              "WebFetch": false,
              "Read": true,
              "LS": false,
              "MultiEdit": false,
              "NotebookEdit": false,
              "NotebookRead": false,
              "Grep": false,
              "Glob": false,
              "Edit": false,
              "Batch": false,
              "Bash": false
            }
          },
          "git": {
            "tools": {
              "git_create_branch": false,
              "git_checkout": false,
              "git_commit": false,
              "git_reset": false,
              "git_add": false
            }
          },
          "postgres-context-server": {
            "tools": {
              "pg-schema": true
            }
          }
        }
      }
    },
    "default_profile": "ask",
    "stream_edits": true,
    "commit_message_model": {
      "provider": "copilot_chat",
      "model": "gpt-4.1"
      // "provider": "amazon-bedrock",
      // "model": "anthropic.claude-3-5-haiku-20241022-v1:0"
    },
    "thread_summary_model": {
      "provider": "copilot_chat",
      "model": "gpt-4.1"
    },
    // "inline_assistant_model": {
    //   "provider": "amazon-bedrock",
    //   "model": "claude-3-5-sonnet"
    // },
    "default_model": {
      "provider": "copilot_chat",
      "model": "claude-sonnet-4"
    }
  },
  "language_models": {
    "bedrock": {
      "authentication_method": "sso",
      "profile": "default",
      "region": "us-east-1"
    }
  },
  "context_servers": {
    // "claude-code": {
    //   "source": "custom",
    //   "command": {
    //     "path": "claude",
    //     "args": ["mcp", "serve"],
    //     "env": null
    //   },
    //   "settings": {}
    // },
    // "git": {
    //   "source": "custom",
    //   "command": {
    //     "path": "uvx",
    //     "args": ["mcp-server-git", "--repository", "/Users/itamar/checkouts/cyera"]
    //   },
    //   "settings": {}
    // },
    // "kafka-ui": {
    //   "command": {
    //     "path": "npx",
    //     "args": ["node", "/Users/itamar/personal/kafka-ui-mcp/build/server.js"],
    //     "env": {
    //       // "KAFKA_UI_API_URL": "https://kafka-ui-cyera.axisapps.io/api"
    //     }
    //   },
    //   "settings": {}
    // },
    "claude-code": {
      "source": "custom",
      "enabled": true,
      "command": "claude",
      "args": ["mcp", "serve"],
      "env": {}
    },
    "postgres-context-server": {
      "source": "extension",
      "settings": {
        "database_url": "postgresql://cyera:cyera@localhost:5432/postgres"
      }
    }
  }
}
