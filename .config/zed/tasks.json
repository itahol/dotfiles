[
  {
    "label": "Live Grep",
    "command": "rvf",
    "args": ["${ZED_SELECTED_TEXT:-}"],
    "reveal_target": "center",
    "show_command": false,
    "hide": "always",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    },
    "env": {
      "EDITOR": "zed-preview"
      // "EDITOR": "zed"
    }
  },
  // Git
  {
    "label": "Start lazygit",
    "command": "lazygit",
    "args": ["-p", "$ZED_WORKTREE_ROOT"],
    "reveal_target": "center",
    "reveal": "always",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    },
    "env": {
      "LG_CONFIG_FILE": "/Users/Itamar/.config/zed/lazygit.yaml"
    }
  },
  {
    "label": "Git Log",
    "command": "lazygit",
    "args": ["-f", "$ZED_RELATIVE_FILE"],
    "reveal_target": "center",
    "reveal": "always",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    },
    "env": {
      "LG_CONFIG_FILE": "/Users/Itamar/.config/zed/lazygit.yaml"
    }
  },
  {
    "label": "Git Amend Commit",
    "command": "git",
    "args": ["commit", "--amend", "--no-edit"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    },
    "env": {
      "GIT_EDITOR": "zed-preview --wait"
    }
  },
  {
    "label": "Git Commit",
    "command": "git",
    "args": ["commit", "--edit"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    },
    "env": {
      "GIT_EDITOR": "zed-preview --wait"
    }
  },
  {
    "label": "Git Stage",
    "command": "git",
    "args": ["add", "$ZED_RELATIVE_FILE"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "Git Stage All",
    "command": "git",
    "args": ["add", "."],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "Git Unstage",
    "command": "git",
    "args": ["restore", "--staged", "$ZED_RELATIVE_FILE"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "Git Discard",
    "command": "git",
    "args": ["restore", "$ZED_RELATIVE_FILE"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "Git Pull",
    "command": "git",
    "args": ["pull"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "Git Push",
    "command": "git",
    "args": ["push"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "Git Stash",
    "command": "git",
    "args": ["stash"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "Git Status",
    "command": "zed-preview",
    "args": ["$(git status --porcelain | fzf --layout=reverse | cut -c 4- )"],
    "hide": "on_success",
    "reveal_target": "center",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "hunk-stage",
    "command": "git diff -U0 --patch -- $ZED_RELATIVE_FILE | create-hunk-patch.sh $ZED_RELATIVE_FILE $ZED_ROW | git apply --cached --unidiff-zero -",
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "hunk-unstage",
    "command": "git diff -U0 --cached | create-hunk-patch.sh $ZED_RELATIVE_FILE $ZED_ROW | git apply -R --cached --unidiff-zero",
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  // Pull Requests
  {
    "label": "PR - Open",
    "command": "gh",
    "args": ["pr", "view", "--web"],
    "reveal": "never",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  {
    "label": "PR - Go to file",
    "command": "zed-preview",
    "args": ["$(gh pr diff --name-only | fzf --layout=reverse)"],
    "hide": "on_success",
    "reveal_target": "center",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  },
  // Misc
  {
    "label": "AWS SSO Login",
    "command": "aws",
    "args": ["sso", "login"],
    "reveal_target": "center",
    "reveal": "always",
    "hide": "on_success",
    "shell": {
      "with_arguments": {
        "program": "/bin/zsh",
        "args": ["-f"]
      }
    }
  }
]
